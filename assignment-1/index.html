<!DOCTYPE html>
<html>
<head>
	<title>CSS Tester</title>
</head>
<body>
	<h1 style="width: 800px; font-family: sans-serif; font-size: 1.5em;"></h1>
	<form onsubmit="return false;" style="margin-bottom: 20px;">
		<input type="text" style="display: inline-block; width: 740px; vertical-align: middle; height: 24px; font-size: 18px;"/>
		<button style="display: inline-block; vertical-align: baseline; height: 30px;">Submit</button>
	</form>
	<script type="text/javascript">
	(function(){"use strict";var e={alphabet:"abcdefghijklmnopqrstuvwxyz",isCoinTossHeads:function(){return Math.floor(Math.random()*10)%2===0},random:function(e,t){if(e===t){return e}return Math.round(Math.random()*Math.abs(e-t))+e},getChildNodes:function(e){return Array.prototype.slice.call(e.childNodes).filter(function(e){return e.nodeType!==3})},getRandomItem:function(t,n){if(n===0){return t}var r=e.getChildNodes(t);if(r.length===0){return t}t=r[e.random(0,r.length-1)];return e.getRandomItem(t,--n)},makeName:function(t,n){if(t===0){return n}return e.makeName(--t,(n?n:"")+e.alphabet[e.random(0,e.alphabet.length-1)])}};window.helpers=e})();(function(e){"use strict";function t(e){this.document=e||window.document;this.dom=this.document.createElement("html");this.head=this.document.createElement("head");this.head.innerHTML="<style>h1, h2, p, pre, code, article, section, header, nav, div, span, a { display: block; font-size: 18px; width: 60%; min-height: 50px; margin: 15px auto; padding: 15px; background-color: white; border: 1px solid black; word-wrap: break-word; font-family: sans-serif; font-weight: normal;  }</style>";this.body=this.document.createElement("body");this.dom.appendChild(this.head);this.dom.appendChild(this.body);this.elems=["h1","h2","p","pre","code","article","section","header","nav","div","span","a"];this.attrs=["id","class","data-item","data-flipped"];this.names=["lorem","lean","startup","ipsum","product","market","customer","development","acquihire","technical","cofounder","user","engagement","testing","shrink","market","venture","capital","pitch","deck","social","bookmarking","group","buying","crowded","market","pivot","onboarding","freemium","prototype","ping","pong","early","stage","disruptive","ecosystem","community","outreach","dynamic","location","based","strategic","investor"]}t.prototype.populate=function(e,t){if(t--===0){return e}var n=Math.ceil(Math.random()*4)+1;for(var r=0;r<n;r++){var i=this.populate(this.getRandomElement(),t);e.appendChild(i)}return e};t.prototype.setRandomAttribute=function(t){var n=this.attrs[Math.round(Math.random()*(this.attrs.length-1))];if(n==="id"){t.setAttribute(n,e.makeName(e.random(1,6)))}else if(n==="data-flipped"){t.setAttributeNode(this.document.createAttribute("data-flipped"))}else{t.setAttribute(n,this.names[Math.round(Math.random()*(this.names.length-1))])}};t.prototype.getRandomElement=function(){var t=this.document.createElement(this.elems[Math.round(Math.random()*(this.elems.length-1))]);if(e.random(0,5)%5>0){this.setRandomAttribute(t);if(e.isCoinTossHeads()){this.setRandomAttribute(t)}}this.addTagsToElement(t);return t};t.prototype.addTagsToElement=function(e){var t=e.tagName.toLowerCase();var n=["id","class","data-item","data-flipped"];for(var r in n){var i="";if(n[r]==="id"){i=e.id}else if(n[r]==="data-flipped"&&e.hasAttribute(n[r])){t+="; data-flipped exists";continue}else if(e.hasAttribute(n[r])){i=e.getAttribute(n[r])}if(i){t+="; "+n[r]+" is "+i}}var s=this.document.createTextNode(t);if(e.parentNode!==null){e.removeChild(e.firstChild);e.insertBefore(s,e.firstChild)}else{e.appendChild(s)}};window.getDom=function(e,n){var r=new t(n);r.depth=e;r.html=r.dom;r.populate(r.dom.querySelector("body"),e);return r}})(window.helpers);(function(e,t){"use strict";function n(t){var n={question:"",query:""};if(t.getAttribute("class")&&e.isCoinTossHeads()){n.question+=" with the class <code>"+t.getAttribute("class")+"</code>";n.query+="."+t.getAttribute("class")}if(t.getAttribute("id")&&e.isCoinTossHeads()){n.question+=" with the id <code>"+t.getAttribute("id")+"</code>";n.query+="#"+t.getAttribute("id")}if(t.getAttribute("data-item")&&e.isCoinTossHeads()){n.question+=" with the attribute <code>data-item</code> (which has the value <code>"+t.getAttribute("data-item")+"</code>)";n.query+='[data-item="'+t.getAttribute("data-item")+'"]'}if(t.hasAttribute("data-flipped")&&e.isCoinTossHeads()){n.question+=" that has the attribute <code>data-flipped</code>";n.query+="[data-flipped]"}if(n.query===""||e.random(0,5)%5>1){n.question=" with the tag name <code>"+t.tagName.toLowerCase()+"</code>"+n.question;n.query=t.tagName.toLowerCase()+n.query}return n}function r(e){this.length=0;this.dom=e}r.prototype.hasQuestion=function(e){for(var t=this.length-1;t>=0;t--){if(this[t].query===e.query){return true}}return false};r.prototype.getUniqueQuestion=function(e){var t=e.call(this);while(this.hasQuestion(t)){t=e.call(this)}return t};r.prototype.shuffle=function(){var e=this;for(var t,n,r=e.length;r;t=Math.floor(Math.random()*r),n=e[--r],e[r]=e[t],e[t]=n);return e};r.prototype.append=function(e){Array.prototype.push.call(this,e);return this};r.prototype.extend=function(e){for(var t=0;t<e.length;t++){this.append(e[t])}return this};r.prototype.toArray=function(){var e=[];for(var t=0;t<this.length;t++){e.push(this[t])}return e};var i={idSearch:function(){var t=Array.prototype.slice.call(this.dom.body.querySelectorAll("[id]"));var n=t[e.random(0,t.length-1)];return{el:n,query:"#"+n.getAttribute("id"),single:true,question:"Please find the element with the id <code>"+n.getAttribute("id")+"</code>."}},classSearch:function(){var t=Array.prototype.slice.call(this.dom.body.querySelectorAll("[class]"));var n=t[e.random(0,t.length-1)];return{el:n,query:"."+n.getAttribute("class"),single:false,question:"Please find the element with the class <code>"+n.getAttribute("class")+"</code>."}},attribute:function(){var t=Array.prototype.slice.call(this.dom.body.querySelectorAll("[data-item]"));Array.prototype.slice.call(this.dom.body.querySelectorAll("[data-flipped]")).forEach(function(e){t.push(e)});var n=t[e.random(0,t.length-1)];return{el:n,query:n.hasAttribute("data-flipped")?"[data-flipped]":'[data-item="'+n.getAttribute("data-item")+'"]',question:n.hasAttribute("data-flipped")?"Please find the element that has the attribute <code>data-flipped</code>":"Please find the element with the attribute <code>data-item</code> that has the value <code>"+n.getAttribute("data-item")+"</code>."}},random:function(){var t=e.getRandomItem(this.dom.body,e.random(1,this.dom.depth));var r=n(t);return{el:t,query:r.query,question:"Please find the element"+r.question+"."}},parent:function(){var t=e.getRandomItem(this.dom.body,e.random(1,this.dom.depth));var r=n(t.parentNode);var i=n(t);return{el:t,query:r.query+" > "+i.query,question:"Please find the child of the element"+r.question+" that is the element"+i.question}},ancestor:function(){var t=function(e,n){if(n===0||!e.parentNode||Object.prototype.toString.call(e.parentNode)==="[object HTMLDocument]"){return e}return t(e.parentNode,--n)};var r=e.getRandomItem(this.dom.body,e.random(1,this.dom.depth));var i=n(t(r,e.random(1,4)));var s=n(r);return{el:r,query:i.query+" "+s.query,question:"Please find the descendant of the element"+i.question+" that is the element"+s.question}}};window.getTest=function(e,t){var n=new r(e);var s=Math.ceil(t/18);var o=new r(e);for(var u=0;u<s*2;u++){o.append(o.getUniqueQuestion(i.idSearch)).append(o.getUniqueQuestion(i.classSearch)).append(o.getUniqueQuestion(i.attribute))}var a=new r(e);for(var f=0;f<s*4;f++){a.append(a.getUniqueQuestion(i.random)).append(a.getUniqueQuestion(i.parent)).append(a.getUniqueQuestion(i.ancestor))}n.extend(o.shuffle()).extend(a.shuffle());return n.toArray()}})(window.helpers,window.getDom);(function(e,t){"use strict";document.body.onload=function(){function c(){function e(e){e.classList.add("selected");e.style.backgroundColor="green"}function t(e){e.classList.remove("selected");e.style.backgroundColor="white"}var n=o.shift();if(!n){return n}Array.prototype.slice.call(r.querySelectorAll(".selected")).forEach(function(e){t(e)});a.innerHTML=n.question;f.value="";if(n.single){e(n.el)}else{Array.prototype.slice.call(r.querySelectorAll(n.query)).forEach(function(t){e(t)})}return n}function p(e){this.isDescendant=/^([^>]*?)\s+([^>]*?)$/.test(e);this.isChild=/^([^>]*?)\s?\>\s?([^>]*?)$/.test(e);this.components=e.split(/\s>\s|\s+/).map(function(e){var t=e.match(/^(.*?)($|#|\.|\[)/);var n=e.match(/#(.*?)($|\.|\[)/);var r=e.match(/\.(.*?)($|#|\[)/);var i=e.match(/\[(.*?)\]/);return{tag:t?t[1]:null,id:n?n[1]:null,className:r?r[1]:null,attribute:i?i[1].replace('"',"'"):null}})}var n=document.createElement("iframe");n.width="800px";n.height="600px";document.body.appendChild(n);var r=n.contentWindow.document;var i=e(4,r);r.removeChild(r.querySelector("html"));r.appendChild(i.dom);var s=18;var o=t(i,s),u=0,a=document.querySelector("h1"),f=document.querySelector("input"),l=document.querySelector("button");var h=c();p.prototype.checkDifferences=function(e){var t="";if(this.isChild||this.isDescendant){if(this.isChild!==e.isChild){t+=(e.isChild?"is a child":"is not a child")+"\n"}else if(this.isDescendant!==e.isDescendant){t+=(e.isChild?"is a descendant":"is not a descendant")+"\n"}}if(this.components.length!==e.components.length){t+="does not have the right number of components \n"}else{var n=["tag","id","className","attribute"];for(var r=0;r<this.components.length;r++){var i=this.components.length===1?"":"in component "+(r+1)+", ";for(var s in n){if(this.components[r][n[s]]!==e.components[r][n[s]]){t+=i+"does not have the right "+n[s]+"\n"}}}}return t===""?false:t};l.addEventListener("click",function(){console.log(h.query);var e=(new p(h.query)).checkDifferences(new p(f.value));if(!e){window.alert("it is correct!");u+=1}else{window.alert("it is wrong because your query:\n"+e)}h=c();if(!h){l.disabled=true;var t=window.prompt("Please enter your name: ");var n=btoa(Date.now()+" "+t+" "+u+" "+s);window.alert("You're done! Please submit this code: \n"+n);console.warn("Your code is: "+n)}return false})}})(window.getDom,window.getTest)
	</script>
</body>
</html>